# For local testing without proper domain
:80 {
    # Enable compression for better performance
    encode gzip

    # Log access - useful for debugging
    log {
        output file /data/access.log {
            roll_size 10MB
            roll_keep 10
        }
    }

    # Handle errors
    handle_errors {
        respond "{http.error.status_code} {http.error.status_text}"
    }

    # Proxy requests to n8n
    reverse_proxy n8n:5678 {
        # Websocket support for n8n realtime features
        transport http {
            keepalive 30s
        }
    }
}